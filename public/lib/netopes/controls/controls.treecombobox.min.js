(function(d){d.fn.NetopesTreeComboBox=function(c){function k(b){console.log("Init...");console.log(b);b.tagId=d(b).attr("id");b.selectedValue=encodeURIComponent(a.value);b.ajaxUrl=a.ajaxUrl;b.ajaxUrlParams="&module="+a.module+"&method="+a.method;a.hideParentsCheckbox&&(b.ajaxUrlParams+="&hpc=1");if(a.uid||0<a.uid.length)b.ajaxUrlParams+="&uid="+a.uid;a.urlParams&&(b.ajaxUrlParams+=a.urlParams);b.urlCallback=function(){var e="";if("object"===typeof a.jsParams)for(var f in a.jsParams){var c=void 0;
try{c=eval(a.jsParams[f])}catch(l){console.log(l),console.log(a.jsParams[f]),c=""}e+="&"+f+"="+c}else"string"===typeof a.jsParams&&(e=a.jsParams);this.ajaxUrl=1===a.encrypt||!0===a.encrypt?this.ajaxUrl+("&arhash="+encodeURIComponent(GibberishAES.enc(b.ajaxUrlParams+e+"&phash="+window.name,"xJS"))):this.ajaxUrl+(b.ajaxUrlParams+e+"&phash="+window.name);return this.ajaxUrl+"&response_type=json&tree=1&val="+b.selectedValue};d("#"+b.tagId+"-ctree").fancytree({checkbox:!0,icon:a.useIcons||!1,selectMode:1,
clickFolderMode:1,debugLevel:0,source:function(){return{url:b.urlCallback(),cache:!1}},lazyLoad:function(a,c){a=b.urlCallback();c.result={url:a,data:{key:c.node.key}}},createNode:function(a,c){if(!c.node.data.hasSelectedChild)return!1;a=b.urlCallback();d.ajax({url:a,data:{key:c.node.key},dataType:"json",success:function(a){c.node.addChildren(a)}})}})}var a={value:"",ajaxUrl:"",module:"",method:"",urlParams:"",jsParams:{},uid:"",encrypt:!1,hideParentsCheckbox:!1,useIcons:!1};"object"===typeof c&&d.extend(a,
c);var g={};if("string"===typeof c){if(g[c]){var h=Array.prototype.slice.call(arguments,1);h.unshift(this);return g[c].apply(this,h)}console.log("Invalid or inaccessible method: ["+c+"]!")}else return this.each(function(){k(this)})}})(jQuery);
