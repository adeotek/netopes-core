var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,b){a instanceof String&&(a=String(a));for(var e=a.length,f=0;f<e;f++){var k=a[f];if(c.call(b,k,f,a))return{i:f,v:k}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,b){a!=Array.prototype&&a!=Object.prototype&&(a[c]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,b,e){if(c){b=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var f=a[e];f in b||(b[f]={});b=b[f]}a=a[a.length-1];e=b[a];c=c(e);c!=e&&null!=c&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:c})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var f=c.length;b=b||0;for(0>b&&(b=Math.max(b+f,0));b<f;b++){var k=c[b];if(k===a||Object.is(k,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,c,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
(function(a){a.fn.NetopesHierarchicalTexts=function(c){function b(d,b){a(d).data("_NetopesHierarchicalTextsConfig",b);a(d).find(".hTextsActions .hTextsActionButton").on("click",function(){n(d,this)});a(d).find(".hTextsData button.hTextsEditButton").on("click",function(){q(d,this)});a(d).find(".hTextsData button.hTextsDeleteButton").on("click",function(){r(d,this)});a(d).find(".hTextsEditActions button.hTextsSaveButton").on("click",function(){n(d,this)});a(d).find(".hTextsEditActions button.hTextsCancelButton").on("click",
function(){var b=a(d).data("_NetopesHierarchicalTextsConfig");a(d).find(".hTextsInput #"+b.tagId+"_hId").first().val("");f(d,"");a(this).parents(".hTextsEditActions").hide()})}var e={tagId:null,tagName:null,textEditorType:"textarea",showEmptySections:!1,fieldErrorClass:"",editButtonClass:"btn btn-primary",deleteButtonClass:"btn btn-danger",deleteConfirmText:"Are you sure you want to delete item?",deleteConfirmTitle:"Action confirm",deleteConfirmOkLabel:"OK",deleteConfirmCancelLabel:"Cancel",requiredSectionClass:"",
requiredSectionMarker:""},f=function(d,b){var c=a(d).data("_NetopesHierarchicalTextsConfig");"ckeditor"===c.textEditorType?SetCkEditorData(c.tagId+"_hValue",b):a(d).find(".hTextsInput #"+c.tagId+"_hValue").first().val(b.replaceAll("<br>","\n"))},k=function(d,b,c){var f=a(d).data("_NetopesHierarchicalTextsConfig");b=a('<li class="hItem" data-id="'+b+'"><div class="hItemData postable" name="'+f.tagName+"["+b+'][data][][text]">'+c+'</div><div class="hItemEditActions"></div><div class="hItemDeleteActions"></div></li>');
a(b).find(".hItemEditActions").append(a('<button class="'+f.editButtonClass+' hTextsEditButton"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>').on("click",function(){q(d,this)}));a(b).find(".hItemDeleteActions").append(a('<button class="'+f.deleteButtonClass+' hTextsDeleteButton"><i class="fa fa-trash" aria-hidden="true"></i></button>').on("click",function(){r(d,this)}));return b},q=function(b,c){var d=a(b).data("_NetopesHierarchicalTextsConfig");c=a(c).parents("li.hItem");var e=
a(c).find(".hItemData").first().html();a(b).find(".hTextsInput #"+d.tagId+"_hId").first().val(a(c).data("id")+"|"+a(c).index());f(b,e);a(b).find(".hTextsEditActions").show()},r=function(b,c){var d=a(b).data("_NetopesHierarchicalTextsConfig");ShowConfirmDialog(d.deleteConfirmText,function(){var b=a(c).parents("li.hItemSection");a(c).parents("li.hItem").remove();0!==a(b).find("ul.hTexts > li.hItem").length||d.showEmptySections||"1"===a(b).data("required")||a(b).remove()},!1,{title:d.deleteConfirmTitle,
ok:d.deleteConfirmOkLabel,cancel:d.deleteConfirmCancelLabel})},n=function(b,c){var d=a(b).data("_NetopesHierarchicalTextsConfig");var e=a(b).data("_NetopesHierarchicalTextsConfig");e="ckeditor"===e.textEditorType?GetCkEditorData(e.tagId+"_hValue"):a(b).find(".hTextsInput #"+e.tagId+"_hValue").first().val().replace(/(?:\r\n|\r|\n)/g,"<br>");a(b).find(".hTextsInput #"+d.tagId+"_hValue").removeClass(d.fieldErrorClass);if(""===e.trim())a(b).find(".hTextsInput #"+d.tagId+"_hValue").addClass(d.fieldErrorClass);
else{var g=a(b).find(".hTextsInput #"+d.tagId+"_hId").first().val();if(0<g.length&&g.includes("|")){var h=g.split("|")[0];g=parseInt(g.split("|")[1]);if(isNaN(g)){console.log("Invalid text item index!");return}g+=1;a(b).find('.hTextsData ul.hSections li.hItemSection[data-id="'+h+'"] ul.hTexts li.hItem:nth-child('+g+") .hItemData").html(e)}else{h=a(c).data("id");if(!h){console.log("Invalid save action!");return}g=a(b).find('.hTextsData ul.hSections li.hItemSection[data-id="'+h+'"]').first();if(0===
g.length){g=a(c).text();var n=a(c).data("code")||"",p=a(c).data("required"),l=a(b).data("_NetopesHierarchicalTextsConfig");a(b).find(".hTextsData ul.hSections li.hItemSection.empty").remove();var m='<li class="hItemSection" data-id="'+h+'" data-required="'+p+'">';m="1"===p?m+('<span class="hItemTitle '+l.requiredSectionClass+'">'+g+l.requiredSectionMarker+"</span>"):m+('<span class="hItemTitle">'+g+"</span>");m+='<input type="hidden" class="postable" name="'+l.tagName+"["+h+'][id]" value="'+h+'"><input type="hidden" class="postable" name="'+
l.tagName+"["+h+'][name]" value="'+g+'"><input type="hidden" class="postable" name="'+l.tagName+"["+h+'][code]" value="'+n+'"><input type="hidden" class="postable" name="'+l.tagName+"["+h+'][required]" value="'+p+'"><ul class="hTexts sortable"></ul></li>';g=a(m);a(b).find(".hTextsData ul.hSections").append(g)}g.find("ul.hTexts").append(k(b,h,e))}a(b).find(".hTextsInput #"+d.tagId+"_hId").val("");f(b,"");a(c).parents(".hTextsEditActions").hide();a(b).find(".hTextsActions .hTextsActionButton").prop("disabled",
!1)}},t={setValueForSection:function(b,c,e){f(b,c);a(b).find(".hTextsActions .hTextsActionButton").each(function(){a(this).data("id")!==e&&a(this).prop("disabled","disabled")})}};if("string"===typeof c){if(t[c])return e=Array.prototype.slice.call(arguments,1),e.unshift(this),t[c].apply(this,e);console.log("Invalid or inaccessible method: ["+c+"]!")}else{var u="object"===typeof c?a.extend(e,c):e;return this.each(function(){b(this,u)})}}})(jQuery);
