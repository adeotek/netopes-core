var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,d,b){a instanceof String&&(a=String(a));for(var c=a.length,g=0;g<c;g++){var k=a[g];if(d.call(b,k,g,a))return{i:g,v:k}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,d,b){a!=Array.prototype&&a!=Object.prototype&&(a[d]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,d,b,c){if(d){b=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var g=a[c];g in b||(b[g]={});b=b[g]}a=a[a.length-1];c=b[a];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,b){var c=this;c instanceof String&&(c=String(c));var d=c.length;b=b||0;for(0>b&&(b=Math.max(b+d,0));b<d;b++){var k=c[b];if(k===a||Object.is(k,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,d,b){if(null==a)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
(function(a){a.fn.NetopesHierarchicalTexts=function(d){function b(b){a(b).find(".hTextsActions .hTextsActionButton").on("click",function(){l(b,this)});a(b).find(".hTextsData button.hTextsEditButton").on("click",function(){m(b,this)});a(b).find(".hTextsData button.hTextsDeleteButton").on("click",function(){n(b,this)});a(b).find(".hTextsEditActions button.hTextsSaveButton").on("click",function(){l(b,this)});a(b).find(".hTextsEditActions button.hTextsCancelButton").on("click",function(){a(b).find(".hTextsInput #"+
c.tagId+"_hId").first().val("");g(b,"");a(this).parents(".hTextsEditActions").hide()})}var c={tagId:null,tagName:null,textEditorType:"textarea",fieldErrorClass:"",editButtonClass:"btn btn-primary",deleteButtonClass:"btn btn-danger",deleteConfirmText:"Are you sure you want to delete item?",deleteConfirmTitle:"Action confirm",deleteConfirmOkLabel:"OK",deleteConfirmCancelLabel:"Cancel"};"object"===typeof d&&a.extend(c,d);var g=function(b,f){"ckeditor"===c.textEditorType?SetCkEditorData(c.tagId+"_hValue",
f):a(b).find(".hTextsInput #"+c.tagId+"_hValue").first().val(f.replaceAll("<br>","\n"))},k=function(b,f,d){f=a('<li class="hItem" data-id="'+f+'"><div class="hItemData postable" name="'+c.tagName+"["+f+'][data][]">'+d+'</div><div class="hItemEditActions"></div><div class="hItemDeleteActions"></div></li>');a(f).find(".hItemEditActions").append(a('<button class="'+c.editButtonClass+' hTextsEditButton"><i class="fa fa-pencil-square-o" aria-hidden="true"></i></button>').on("click",function(){m(b,this)}));
a(f).find(".hItemDeleteActions").append(a('<button class="'+c.deleteButtonClass+' hTextsDeleteButton"><i class="fa fa-trash" aria-hidden="true"></i></button>').on("click",function(){n(b,this)}));return f},m=function(b,d){d=a(d).parents("li.hItem");var f=a(d).find(".hItemData").first().html();a(b).find(".hTextsInput #"+c.tagId+"_hId").first().val(a(d).data("id")+"|"+a(d).index());g(b,f);a(b).find(".hTextsEditActions").show()},n=function(b,d){ShowConfirmDialog(c.deleteConfirmText,function(){var b=a(d).parents("li.hItemSection");
a(d).parents("li.hItem").remove();0===a(b).find("ul.hTexts > li.hItem").length&&a(b).remove()},!1,{title:c.deleteConfirmTitle,ok:c.deleteConfirmOkLabel,cancel:c.deleteConfirmCancelLabel})},l=function(b,d){var f="ckeditor"===c.textEditorType?GetCkEditorData(c.tagId+"_hValue"):a(b).find(".hTextsInput #"+c.tagId+"_hValue").first().val().replace(/(?:\r\n|\r|\n)/g,"<br>");a(b).find(".hTextsInput #"+c.tagId+"_hValue").removeClass(c.fieldErrorClass);if(""===f.trim())a(b).find(".hTextsInput #"+c.tagId+"_hValue").addClass(c.fieldErrorClass);
else{var e=a(b).find(".hTextsInput #"+c.tagId+"_hId").first().val();if(0<e.length&&e.includes("|")){var h=e.split("|")[0];e=parseInt(e.split("|")[1]);if(isNaN(e)){console.log("Invalid text item index!");return}e+=1;a(b).find('.hTextsData ul.hSections li.hItemSection[data-id="'+h+'"] ul.hTexts li.hItem:nth-child('+e+") .hItemData").html(f)}else{h=a(d).data("id");if(!h){console.log("Invalid save action!");return}e=a(b).find('.hTextsData ul.hSections li.hItemSection[data-id="'+h+'"]').first();if(0===
e.length){e=a(d).text();var l=a(d).data("code")||"";a(b).find(".hTextsData ul.hSections li.hItemSection.empty").remove();e=a('<li class="hItemSection" data-id="'+h+'"><span class="hItemTitle">'+e+'</span><input type="hidden" class="postable" name="'+c.tagName+"["+h+'][id]" value="'+h+'"><input type="hidden" class="postable" name="'+c.tagName+"["+h+'][name]" value="'+e+'"><input type="hidden" class="postable" name="'+c.tagName+"["+h+'][code]" value="'+l+'"><ul class="hTexts sortable"></ul></li>');
a(b).find(".hTextsData ul.hSections").append(e)}e.find("ul.hTexts").append(k(b,h,f))}a(b).find(".hTextsInput #"+c.tagId+"_hId").val("");g(b,"");a(d).parents(".hTextsEditActions").hide()}},p={};if("string"===typeof d){if(p[d]){var q=Array.prototype.slice.call(arguments,1);q.unshift(this);return p[d].apply(this,q)}console.log("Invalid or inaccessible method: ["+d+"]!")}else return this.each(function(){b(this)})}})(jQuery);
