function ShowLoader(element,full){if(typeof element=="object"){var obj=element}else{var obj=$("#"+element)}if($(obj).length>0){if(full==1||full==true||full=="1"){$(obj).css("height",Math.max($(document).outerHeight(),window.innerHeight)+"px")}$(obj).show()}}function HideLoader(element){if(typeof element=="object"){var obj=element}else{var obj=$("#"+element)}if($(obj).length>0){$(obj).hide()}}function OpenUrl(url,new_tab){if(!url){return false}if(new_tab===true||new_tab===1||new_tab==="1"){window.open(url,"_blank");window.focus()}else{window.open(url)}}function randerReCaptcha(elementid,site_key){if(grecaptcha&&elementid&&$("#"+elementid).length){if(!site_key||site_key.length==0){site_key=$("#"+elementid).data("site-key")}if(site_key){grecaptcha.render(elementid,{sitekey:site_key})}}}function getReCaptcha(elementid){if(grecaptcha){var response=grecaptcha.getResponse();if(response.length){if(elementid&&elementid.length){$("#"+elementid).val(response);return true}else{return response}}}return false}function resetReCaptcha(){if(grecaptcha){grecaptcha.reset()}}function GetCurrentLanguageCode(){var langsel=$("#lang-selector").val();return langsel.substring(langsel.indexOf("^",0)+1).toLowerCase()}function GetNewLanguageLink(newlang,newdomain,olddomain){var newvalue=newlang;if(strpos(newlang,"^")){newlang=newlang.substring(newlang.indexOf("^",0)+1)}var clink=window.location.href.split(/#/)[0];var clinkhash=window.location.hash.toString();var clang=GetCurrentLanguageCode();if(newdomain!=undefined&&newdomain.length>0){clink=clink.replace(olddomain,newdomain)}var newlink=clink;if(strpos(clink,"/"+clang+"/",0)){newlink=clink.replace("/"+clang+"/","/"+newlang+"/")}else if(strpos(clink,"/"+clang,0)){newlink=clink.replace("/"+clang,"/"+newlang+"/")}else if(strpos(clink,"language="+clang,0)){newlink=clink.replace("language="+clang,"language="+newlang)}else if(strpos(clink,"/index.php",0)){newlink=clink.replace("/index.php","/"+newlang+"/index.php")}else{newlink=clink+(clink.charAt(clink.length-1)=="/"?"":"/")+newlang+"/"}$("#lang-selector").val(newvalue);return newlink+clinkhash}function SetNewLanguageLink(newlang,newdomain,olddomain){var lnlink=GetNewLanguageLink(newlang,newdomain,olddomain);if(lnlink){window.location.href=lnlink}}function GetElementValue(elementid,elementproperty){var lproperty=elementproperty?elementproperty:"value";var result="";if($("#"+elementid).length>0){switch(lproperty){case"innerHtml":result=$("#"+elementid).html();break;case"option":result=$("#"+elementid+" option:selected").text();break;case"value":default:result=$("#"+elementid).val();break}}return result}$(document).on("focus",".clsJqDatePicker",function(e){var langcode=GetCurrentLanguageCode();$.datepicker.setDefaults($.datepicker.regional[langcode]);if($(this).attr("data-jqdpparams").length){eval("$(this).datepicker({"+$(this).attr("data-jqdpparams")+"});")}else{$(this).datepicker()}});$(document).on("focus",".clsJqDateTimePicker",function(e){var langcode=GetCurrentLanguageCode();$.datepicker.setDefaults($.datepicker.regional[langcode]);if($(this).attr("data-jqdpparams").length){eval("$(this).datetimepicker({"+$(this).attr("data-jqdpparams")+"});")}else{$(this).datetimepicker()}});$(document).on("focus",".clsJqTimePicker",function(e){var langcode=GetCurrentLanguageCode();if($(this).attr("data-jqdpparams").length){eval("$(this).timepicker({"+$(this).attr("data-jqdpparams")+"});")}else{$(this).timepicker()}});$(document).on("focus",".clsSetNumberFormat",function(e){var anull=$(this).attr("data-anull");if(anull!==1||$(this).val()!==""){var nformat=$(this).attr("data-format");if(nformat){var farr=nformat.split("|");var formated_value=$(this).val().replaceAll(farr[3],"").replaceAll(farr[2],"");$(this).val(formated_value)}}});$(document).on("focusout",".clsSetNumberFormat",function(e){var anull=$(this).attr("data-anull");if((anull==="1"||anull==="true")&&$(this).val()===""){$(this).css("color","#000000")}else{if($(this).hasClass("clsNumDiscColor")){if($(this).val()<0){$(this).css("color","#368000")}else if($(this).val()>0){$(this).css("color","#CF0000")}else{$(this).css("color","#000000")}}var nformat=$(this).attr("data-format");if(nformat){var farr=nformat.split("|");var decimal_no=Number(farr[0]);var decimal_separator=farr[1];var group_separator=farr[2];var sufix=farr[3];var tvalue=0;if(decimal_separator){tvalue=$(this).val().replaceAll("%","").replaceAll(group_separator,"").replaceAll(decimal_separator,".").replaceAll(sufix,"").trim()}else{tvalue=$(this).val().replaceAll("%","").replaceAll(group_separator,"").replaceAll(sufix,"").trim()}var formated_value=$.number(tvalue,decimal_no,decimal_separator,group_separator)+sufix;$(this).val(formated_value)}}});function FormatToNumericValue(element_value,decimal_separator,group_separator,sufix){return Number(element_value.replaceAll(sufix,"").replaceAll(group_separator,"").replaceAll(decimal_separator,"."))}function GetNumericTextboxValue(element){var eObj=null;if(typeof element==="object"){if(element.length){eObj=element}}else if(typeof element==="string"){if(element.length){eObj=$("#"+element)}}if(eObj==null){console.log("Invalid element:");console.log(element);return null}var dFormat=eObj.data("format");if(!dFormat.length){return eObj.val()}else{var farr=dFormat.split("|");var decimalSeparator=farr[1]||".";var groupSeparator=farr[2]||",";var suffix=farr[3]||"";return FormatToNumericValue(eObj.val(),decimalSeparator,groupSeparator,suffix)}}function GetCalculatedValue(element_value,decimal_separator){var formated_value=element_value+"";formated_value=formated_value.replaceAll(".",decimal_separator);return formated_value}function CheckBoxClickBaseEvent(obj,elementid){if(typeof obj!="object"){if(!elementid||elementid.length==0){return false}obj=$("#"+elementid)}var cvalue=$(obj).val();if(cvalue==1){$(obj).val(0)}else{$(obj).val(1)}$(obj).trigger("change")}function UnselectGroupCheckBoxes(grouptag,obj,valuetag){var notselected=true;$("#"+grouptag+" input[type=image]").each(function(){if($(this).attr("id")==obj.id&&obj.value!=0){if($("#"+valuetag).length>0){var cvalue=$("#"+$(this).attr("id")+"_value").val();$("#"+valuetag).val(cvalue);notselected=false}}else{$(this).val(0)}});if(notselected===true){$("#"+valuetag).val("")}}function GroupCheckBoxBaseEvent(obj){if(!obj||$(obj).val()=="1"){return}var eid=$(obj).attr("data-id");if(eid&&$("#"+eid).length>0){$("#"+eid).val($(obj).attr("data-val"));$("#"+eid+"-container input[type=image].clsGCKBItem").val("0");$(obj).val("1");$("#"+eid).trigger("change")}}$(document).on("click",".clsGCKBItem.active",function(e){GroupCheckBoxBaseEvent(this)});$(document).on("keypress",".clsGCKBItem.active",function(e){if(event.keyCode==13){GroupCheckBoxBaseEvent(this)}});function AppendComboBoxItem(elementid,val,text,selected){if(!elementid||typeof elementid!="string"||!elementid.length){return}var obj=$("#"+elementid);if(!obj.length){return}if($(obj).hasClass("select2-hidden-accessible")){if($(obj).find("option[value='"+val+"']").length){if(selected==1){$(obj).val(val).trigger("change")}}else{var newOption=new Option(text?text:"",val,selected==1,selected==1);$(obj).append(newOption).trigger("change")}}else{var optObj=$(obj).find("option[value="+(val?val:"")+"]").first();if(optObj.length){optObj.html(text?text:"")}else{$(obj).append('<option value="'+val+'">'+(text?text:"")+"</option>")}if(selected==1){$(obj).val(val).trigger("change")}}}function UpdateComboBoxClass(elementid){$("#"+elementid+" option").each(function(e){if($(this).attr("selected")=="selected"){$("#"+elementid).addClass($(this).attr("class"))}else{$("#"+elementid).removeClass($(this).attr("class"))}})}function CBODDBtnClick(elementid){var obj=$("#"+elementid+"-dropdown");if($(obj).css("display")=="none"){var lwidth=$(obj).width();var cwidth=$("#"+elementid+"-cbo").outerWidth();var loffset=$("#"+elementid+"-cbo").position();var ltop=loffset.top+$("#"+elementid+"-cbo").outerHeight();var lleft=loffset.left;if(lleft+lwidth>window.innerWidth&&window.innerWidth>lwidth){lleft=Math.max(0,lleft-(lwidth-cwidth))}$(obj).css("top",ltop+"px");$(obj).css("left",lleft+"px");$(obj).show()}else{$(obj).hide()}}function GCBOLoader(state,elementid){var obj=$("#"+elementid+"-dropdown > .gcbo-loader");if(obj&&obj.length>0){if(state==1){$(obj).css("padding-top",$(obj).outerHeight()/2-16);$(obj).show()}else{$(obj).hide()}}}function GCBODDBtnClick(elementid,open){if($("#"+elementid).attr("disabled")){return false}var obj=$("#"+elementid+"-dropdown");var cbo=$("#"+elementid+"-cbo");var act=open===0?false:open===1?true:$(obj).css("display")=="none";if(act){var lwidth=$(obj).width();var cwidth=$(cbo).outerWidth();var loffset=$(cbo).position();var ltop=loffset.top+$(cbo).outerHeight();var lleft=loffset.left;if(lleft+lwidth>window.innerWidth&&window.innerWidth>lwidth){lleft=Math.max(0,lleft-(lwidth-cwidth))}$(obj).css("top",ltop+"px");$(obj).css("left",lleft+"px");if($(obj).attr("data-reload")==1||$(cbo).val()!=$("#"+elementid).attr("data-text")){var lcmd=$(cbo).attr("data-ajax");if(lcmd&&lcmd.length>0){$("#"+elementid+"-gcbo-target").html("");$(obj).show();lcmd=GibberishAES.dec(lcmd,elementid);eval(lcmd);if($(cbo).val()==""){$(cbo).val($("#"+elementid).attr("data-text"))}}}if($(obj).css("display")=="none"){$(obj).show()}}else{if($(cbo).val()!=$("#"+elementid).attr("data-text")){var otxt=$("#"+elementid).attr("data-text");if(otxt&&otxt.length){$(cbo).val(otxt)}else{$(cbo).val("")}}$(obj).hide()}}function GCBOSetValue(elementid,val,title,btnclick){if($("#"+elementid).attr("disabled")){return false}var clear=false;var obj=$("#"+elementid);var cbo=$("#"+elementid+"-cbo");var oval=$(obj).val();if(val==null){var emptyval=$(obj).attr("data-eval");val=emptyval&&emptyval.length?emptyval:"";clear=true}$(obj).val(val);$("#"+elementid+"-dropdown").attr("data-reload",1);$(cbo).val(title);$(cbo).attr("data-value",val);$(obj).attr("data-text",title);$("#"+elementid+"-dropdown .gcbo-selector").each(function(e){if($(this).val()==1){$(this).val("0")}});if(val&&val!=""){$("#"+elementid+"-dropdown #"+elementid+"-"+val+".gcbo-selector").val("1")}if(btnclick==true||btnclick==1){CBODDBtnClick(elementid)}else if(clear){$("#"+elementid+"-dropdown").hide()}var onchange=$("#"+elementid).attr("data-onchange");if(onchange&&onchange.length>0){eval(onchange)}}function TCBOSetValue(elementid,val,title,update_tree){if($("#"+elementid).attr("disabled")){return false}var oval=$("#"+elementid).val();$("#"+elementid).val(val);var obj=$("#"+elementid+"-cbo");$(obj).val(title);$(obj).attr("data-value",val);if(update_tree==true||update_tree==1){var tree=$("#"+elementid+"-ctree").fancytree("getTree");var node=tree.getNodeByKey(oval);if(node!=null){node.setSelected(false)}}var onchange=$("#"+elementid).attr("data-onchange");if(onchange&&onchange.length>0){eval(onchange)}}function InitTCBOFancyTree(elementid,val,module,method,url_params,namespace,uid,encrypt,hide_parents_checkbox){if(!elementid||elementid.length==0){return}var lval=encodeURIComponent(val);var aurl=xAppWebLink+"/aindex.php?namespace="+namespace;var luid="";var lparams=hide_parents_checkbox?"&hpc=1":"";if(uid||uid.length>0){luid+="&uid="+uid}if(encrypt===1||encrypt===true){aurl+="&arhash="+encodeURIComponent(GibberishAES.enc("module="+module+"&method="+method+url_params+lparams+luid+"&phash="+window.name,"xJS"))}else{aurl+="&module="+module+"&method="+method+url_params+lparams+luid+"&phash="+window.name}$("#"+elementid+"-ctree").fancytree({checkbox:true,selectMode:1,clickFolderMode:1,debugLevel:0,source:{url:aurl+"&type=json&tree=1&val="+lval},lazyLoad:function(event,data){data.result={url:aurl+"&type=json&tree=1&val="+lval,data:{key:data.node.key}}},createNode:function(event,data){if(!data.node.data.hasSelectedChild){return false}$.ajax({url:aurl+"&type=json&tree=1&val="+lval,data:{key:data.node.key},dataType:"json",success:function(response){data.node.addChildren(response)}})},select:function(event,data){if(data.node.isSelected()){TCBOSetValue(elementid,data.node.key,data.node.title,false);CBODDBtnClick(elementid)}else{TCBOSetValue(elementid,"","",false)}}})}$(document).on("keydown","input.clsGridComboBox[type=text]",function(e){if($("#"+$(this).attr("data-id")).attr("disabled")){e.preventDefault();return false}if(e.keyCode==13){var elementid=$(this).attr("data-id");$("#"+elementid+"-dropdown").attr("data-reload",1);GCBODDBtnClick(elementid,1)}else if(e.keyCode==27){e.preventDefault();GCBODDBtnClick($(this).attr("data-id"),0)}else if(e.altKey&&(e.keyCode==40||e.keyCode==98)||e.keyCode==115){GCBODDBtnClick($(this).attr("data-id"),null)}});$(document).on("keydown","input.clsTreeComboBox[type=text]",function(e){if($("#"+$(this).attr("data-id")).attr("disabled")){e.preventDefault();return false}if(e.keyCode==13||e.altKey&&(e.keyCode==40||e.keyCode==98)||e.keyCode==115){CBODDBtnClick($(this).attr("data-id"))}else if(e.keyCode==27){e.preventDefault();$("#"+$(this).attr("data-id")+"-dropdown").hide()}});function SmartCBOInitialize(){$("select.SmartCBO").each(function(i,obj){if(!$(obj).hasClass("select2-hidden-accessible")){var tagid=$(obj).attr("id");var params_str=$(obj).attr("data-smartcbo");if(tagid&&params_str){var oparams=eval(GibberishAES.dec(decodeURIComponent(params_str),tagid));$(obj).select2(oparams)}}})}function GetSmartCBOValue(element,asObject){if(!element){return null}var lelement=element;if(typeof element!="object"){lelement=$("#"+element)}if(!$(lelement).length){return null}var lval=$(lelement).val()||"";if(typeof lval!="object"||asObject==true||asObject==1){return lval}lval=lval.join(",");return lval}function GetSmartCBOText(element,asObject){if(!element){return null}var lelement=element;if(typeof element!="object"){lelement=$("#"+element)}if(!$(lelement).length){return null}var ltext=$(lelement).select2("data");if(typeof ltext!="object"){return null}var lval=null;for(var i=0;i<ltext.length;i++){if(asObject==true||asObject==1){if(lval==null){lval={}}lval[i]=ltext[i].name}else{lval=(lval==null?"":lval+",")+ltext[i].name}}return lval}function SetSmartCBOValue(element,new_val){if(!element){return false}var lelement=element;if(typeof element!="object"){lelement=$("#"+element)}if(!$(lelement).length){return false}$(lelement).val(new_val).trigger("change");return true}function GetSelect2Val(element,org){if(!element){return undefined}var lelement=element;if(typeof element!="object"){lelement=$("#"+element)}var lval=$(lelement).val()||"";if(org!=true&&org!=1&&typeof lval=="object"){lval=lval.join(",")}return lval}$(document).on("click","div.MainKVL > .KVLAddBtn",function(e){KVLAddElement(this)});$(document).on("click","div.MainKVL > ul.KVLList > li > .KVLIDelBtn",function(e){KVLRemoveElement(this)});$(document).on("keydown","div.MainKVL > input[type=text].KVLNewKey",function(e){if(e.keyCode==13){KVLAddElement(this)}});function KVLAddElement(obj){var parent=$(obj).parent();var vitem=$(parent).children("input[type=text].KVLNewKey").first();var ival=vitem.val();var iname=vitem.data("name");if(!iname){iname=$(parent).attr("name")}if(ival&&ival.length){$(parent).find("ul.KVLList span.KVLBlank").addClass("hidden");$(parent).children("ul.KVLList").first().append('<li><label class="KVLILabel">'+ival+'</label><input type="text" class="KVLIValue postable" name="'+iname+"["+ival+']" placeholder="[value]" value=""><button class="KVLIDelBtn"><i class="fa fa-minus-circle"></i></button></li>');$(vitem).val("")}}function KVLRemoveElement(obj){var parent=$(obj).parent();if(parent){var ulparent=$(parent).parent();$(parent).remove();if(ulparent&&$(ulparent).find("li").length<=1){$(ulparent).find("span.KVLBlank").removeClass("hidden")}}}function BindShortcuts(saveCtrl,cancelCtrl){var kpressfct=function(e){if(e.keyCode==13&&$("input:focus[type=text],textarea:focus").length==0)$("#"+saveCtrl).click();else if(e.keyCode==27){e.preventDefault();$("#"+cancelCtrl).click()}};$(document).on("keypress",kpressfct)}$(document).on("keydown",".clsOnEnterAction",function(e){if(e.keyCode==13){var lact=$(this).attr("data-onenter");if(lact){eval(lact)}}});$(document).on("keydown",".clsOnEnterActionButton",function(e){if(e.keyCode==13){var lid=$(this).attr("data-onenterbtn");if(lid){$(this).trigger("focusout");$("#"+lid).click()}}});function AddClassOnErrorByParent(parentid,reset,errclass){var lclass=errclass?errclass:"clsFieldError";if(reset){$("#"+parentid+" .clsRequiredField").removeClass(lclass)}else{$("#"+parentid+" .clsRequiredField").addClass(lclass)}}function AddClassOnError(elementid,reset,errclass){var lclass=errclass?errclass:"clsFieldError";if(reset){$("#"+elementid).removeClass(lclass)}else{$("#"+elementid).addClass(lclass)}}function CheckIfEnter(e){var characterCode;if(e&&e.which){characterCode=e.which}else{e=event;characterCode=e.keyCode}return characterCode==13?true:false}$(document).on("keydown",".clsSetNoNumericValidation",function(e){var key=e.which||e.keyCode||e.charCode||0;if(key>=48&&key<=57||key>=96&&key<=105){e.preventDefault()}});$(document).on("keydown",".clsSetNumericValidation",function(e){var key=e.which||e.keyCode||e.charCode||0;if(e.ctrlKey||e.altKey||$.inArray(key,[0,8,9,13,16,27,33,34,35,36,37,38,39,40,45,46])!==-1||!e.shiftKey&&key>=96&&key<=105||!e.shiftKey&&key>=48&&key<=57||!e.shiftKey&&(key==189||key==109)&&this.selectionStart==0&&this.value.split("-").length<2){return}var nformat=$(this).attr("data-format");var ds=false;if(nformat){var farr=nformat.split("|");if(farr[0]!==0){ds=farr[1]}}if(!e.shiftKey&&key==188&&ds==","&&this.value.indexOf(ds)==-1){return}if(!e.shiftKey&&(key==190||key==110)&&ds=="."&&this.value.indexOf(ds)==-1){return}e.preventDefault()});$(document).on("keydown",".clsSetPhoneValidation",function(e){var key=e.which||e.keyCode||e.charCode||0;if(e.ctrlKey||e.altKey||$.inArray(key,[0,8,9,13,16,27,32,33,34,35,36,37,38,39,40,45,46])!==-1||!e.shiftKey&&$.inArray(key,[190,110,189,109]!==-1)||!e.shiftKey&&key>=96&&key<=105||!e.shiftKey&&key>=48&&key<=57||(!e.shiftKey&&key==107||e.shiftKey&&key==187&&this.selectionStart==0&&this.value.split("+").length<2)){return}e.preventDefault()});$(document).on("focusout",".clsSetUcFirst",function(e){var lval=$(this).val().ucfirst(false);$(this).val(lval)});$(document).on("focusout",".clsSetUcFirstAll",function(e){var lval=$(this).val().ucfirst(true);$(this).val(lval)});function AnimatedHide(elementid,val,speed){if($("#"+elementid).length>0){var lspeed=speed?speed:600;if(val==1){$("#"+elementid).hide(lspeed)}else{$("#"+elementid).show(lspeed)}}}function AnimatedHideWithSave(elementid,valueid,speed){if($("#"+elementid).length>0){var lspeed=speed?speed:600;if($("#"+valueid).val()==1){$("#"+elementid).hide(lspeed)}else{$("#"+elementid).show(lspeed)}if(typeof Storage!=="undefined"){localStorage.setItem(valueid,$("#"+valueid).val()+"|"+elementid)}else{var expdate=new Date;expdate.setMonth(expdate.getMonth()+6);document.cookie=valueid+"="+$("#"+valueid).val()+"|"+elementid+"; expires="+expdate.toGMTString()+"; path=/; domain="+location.host+";"}}}function CreateCkEditor(phash,e,multi,econfig,ewidth,eheight){if(multi){var es=e.split(",");for(var i=0;i<es.length;i++){CreateCkEditor(phash,es[i],false,econfig,ewidth,eheight)}}else{if(!e||e.length==0){return}var ckei=window.ckei_list;if(ckei==undefined||ckei==null||typeof ckei!="object"){ckei=new Array}var newconfig=typeof econfig=="object"?econfig:new Object;if(ewidth){newconfig.width=ewidth}if(eheight){newconfig.height=eheight}CKEDITOR.replace(e,newconfig);if($.inArray(e,ckei)==-1){ckei.push(e)}window.ckei_list=ckei}}function DestroyCkEditors(phash,target){if(!target||target.length==0){return}var targetObj=$("#"+target);if(!targetObj){return}var ckei=window.ckei_list;if(ckei==undefined||ckei==null||typeof ckei!="object"||ckei.length==0){return}var newCkei=new Array;for(var i=0;i<ckei.length;i++){var dropped=false;targetObj.find("#"+ckei[i]).each(function(){var editor=CKEDITOR.instances[ckei[i]];if(editor){editor.destroy(true)}dropped=true});if(!dropped){newCkei.push(ckei[i])}}window.ckei_list=newCkei}function DestroyCkEditor(phash,e,multi){if(e){if(multi){var es=e.split(",");for(var i=0;i<es.length;i++){DestroyCkEditor(phash,es[i],false)}}else{var ckei=window.ckei_list;var editor=CKEDITOR.instances[e];if(editor){editor.destroy(true)}if(ckei==undefined||ckei==null||typeof ckei!="object"||$.inArray(e,ckei)==-1){return}ckei.splice(ckei.indexOf(e),1);window.ckei_list=ckei}}else{var ckei=window.ckei_list;if(ckei==undefined||ckei==null||typeof ckei!="object"||ckei.length==0){return}for(var i=0;i<ckei.length;i++){var editor=CKEDITOR.instances[ckei[i]];if(editor){editor.destroy(true)}}window.ckei_list=new Array}}function GetCkEditorData(e){var editor=CKEDITOR.instances[e];if(editor){return editor.getData()}return""}function CreateFileUploader(elementid,multi){if(multi==1){if(elementid){$("#"+elementid+" .clsFileUploader").each(function(index){CreateFileUploader(this,0)})}else{$(".clsFileUploader").each(function(index){CreateFileUploader(this,0)})}}else if(elementid){if(typeof elementid=="object"){var element=$(elementid)}else{var element=$("#"+elementid)}var droparea=false;if($(element).parent().hasClass("clsDropArea")){$(document).on("drop dragover",function(e){e.preventDefault()});droparea=$(element).parent()}$(element).fileupload({dataType:"json",dropZone:droparea,formData:[{name:"targetdir",value:$(element).attr("data-targetdir")},{name:"subfolder",value:$(element).attr("data-subfolder")}],start:function(e){var statusid=$(element).attr("data-statusid");if(statusid&&$("#"+statusid).length){$("#"+statusid).css("display","")}},done:function(e,data){var statusid=$(element).attr("data-statusid");if(statusid&&$("#"+statusid).length){$("#"+statusid).css("display","none")}if(data.result.files[0].error&&data.result.files[0].error!=""){ShowErrorDialog("Upload failed: "+data.result.files[0].error)}else{var callbackfunc=$(element).attr("data-callback");if(callbackfunc){callbackfunc=GibberishAES.dec(decodeURIComponent(callbackfunc),"HTML");if(callbackfunc instanceof Function){callbackfunc(data.files[0].name,this)}else{callbackfunc=callbackfunc.replace("&amp;namespace=","&namespace=");callbackfunc=callbackfunc.replaceAll("#uploadedfile#",data.files[0].name);eval(callbackfunc)}}}},fail:function(e,data){ShowErrorDialog("Upload failed: "+data.errorThrown+" (Status: "+data.textStatus+")")}})}else{return false}}function TreeGridViewAction(obj,pid,tableid,cval,orgid){if(!orgid){orgid=pid}if(cval!=0&&cval!=1){cval=$(obj).val()==1?0:1}if(orgid==pid){$(obj).val(cval)}$("table#"+tableid+" > tbody > tr.clsTreeGridChildOf"+pid).each(function(i){if(cval==1){$(this).show()}else{$(this).hide()}obj=$(this).find("input.clsTreeGridBtn").first();if(typeof obj=="object"){pid=$(this).attr("data-id");if(pid){TreeGridViewAction(obj,pid,tableid,cval==1?$(obj).val():0,orgid)}}})}function RepeatControl(obj,tagid){if(!obj||!tagid){return false}var $ltag=$(obj).parent().find("[data-tid='"+tagid+"']").last();if($ltag.length<=0){return false}var lindex=Number($ltag.attr("data-ti"));var lntagid=tagid+"-"+(lindex+1);var $lntag=$ltag.clone();if($lntag.hasClass("clsSubForm")){$lntag.find(".postable").each(function(){var peid=$(this).attr("id");if(peid){var penid=peid.substring(0,peid.lastIndexOf("-"))+"-"+(lindex+1);$(this).attr("id",penid);$(this).val("")}})}$lntag.attr("data-ti",lindex+1);$lntag.attr("id",lntagid);$lntag.val("");$lntag.addClass("ctrl-clone");$lntag.insertBefore($(obj));var lract=$(obj).attr("data-ract");$('<button class="clsRepeatableCtrlBtn remove-ctrl-btn" onclick="RemoveRepeatableControl(this,\''+lntagid+'\')"><i class="fa fa-minus-circle" aria-hidden="true"></i>'+(lract?lract:"")+"</button>").insertBefore($(obj))}function RemoveRepeatableControl(obj,elementid){if(!elementid){return false}$("#"+elementid).remove();$(obj).remove()}